"use strict";WaveSurfer.MediaElement=Object.create(WaveSurfer.WebAudio),WaveSurfer.util.extend(WaveSurfer.MediaElement,{init:function(e){this.params=e,this.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){}},this.mediaType=e.mediaType.toLowerCase(),this.elementPosition=e.elementPosition},load:function(e,t,i){var r=this,n=document.createElement(this.mediaType);n.controls=!1,n.autoplay=!1,n.preload="auto",n.src=e,n.addEventListener("error",function(){r.fireEvent("error","Error loading media element")}),n.addEventListener("canplay",function(){r.fireEvent("canplay")}),n.addEventListener("ended",function(){r.fireEvent("finish")}),n.addEventListener("timeupdate",function(){r.fireEvent("audioprocess",r.getCurrentTime())});var a=t.querySelector(this.mediaType);a&&t.removeChild(a),t.appendChild(n),this.media=n,this.peaks=i,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate)},isPaused:function(){return this.media.paused},getDuration:function(){var e=this.media.duration;return e>=1/0&&(e=this.media.seekable.end()),e},getCurrentTime:function(){return this.media.currentTime},getPlayedPercents:function(){return this.getCurrentTime()/this.getDuration()||0},setPlaybackRate:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate},seekTo:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()},play:function(e,t){this.seekTo(e),this.media.play(),t&&this.setPlayEnd(t)},pause:function(){this.media.pause(),this.clearPlayEnd()},setPlayEnd:function(e){var t=this;this.onPlayEnd=function(i){i>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this.onPlayEnd)},clearPlayEnd:function(){this.onPlayEnd&&(this.un("audioprocess",this.onPlayEnd),this.onPlayEnd=null)},getPeaks:function(e){return this.buffer?WaveSurfer.WebAudio.getPeaks.call(this,e):this.peaks||[]},getVolume:function(){return this.media.volume},setVolume:function(e){this.media.volume=e},destroy:function(){this.pause(),this.unAll(),this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}),WaveSurfer.AudioElement=WaveSurfer.MediaElement;